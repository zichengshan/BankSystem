{"ast":null,"code":"var _jsxFileName = \"/Users/zicheng.s/Documents/UC_Irvine_Info/Class/2022Spring/266P/Project/Bank_React/my-bank/src/components/Register.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\"; // zishan01\n// 12345\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Register() {\n  _s();\n\n  // registerStatusText is used to save the message whether the account is registered successfully or not\n  const [registerStatusText, setRegisterStatusText] = React.useState(\"\"); // formData is used to save the user input values\n\n  const [formData, setFormData] = React.useState({\n    username: \"\",\n    password: \"\"\n  }); // inputWarningText is used to save messages that prompts the user to change the information.\n\n  const [inputWarningText, setInputWarningText] = React.useState({\n    usernameReminder: \"\",\n    passwordReminder: \"\"\n  });\n  /**\n   * Check that the input conforms to the specification.\n   * @param data\n   * @returns {boolean}\n   */\n\n  function checkInput(data) {\n    const regex = /[_\\\\-\\\\.0-9a-z]/;\n    let result = true;\n\n    for (let char of data) {\n      if (char.match(regex) === null) {\n        result = false;\n      }\n    }\n\n    return result && data.length <= 127 && data.length >= 1;\n  }\n\n  function updateFormData(event) {\n    event.preventDefault();\n    console.log(event.target.value);\n    setFormData(prevFormData => {\n      return { ...prevFormData,\n        [event.target.name]: event.target.value\n      };\n    });\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    const nameIsValid = checkInput(formData.username);\n    const passwordIsValid = checkInput(formData.password);\n    setInputWarningText(prevState => ({\n      usernameReminder: \"\",\n      passwordReminder: \"\"\n    }));\n\n    if (nameIsValid && passwordIsValid) {\n      fetch('http://localhost:8081/bankSys/user/create', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(formData)\n      }).then(response => response.json()).then(data => {\n        // setBalance(data.data.user.balance)\n        if (data.status === 200) {\n          setRegisterStatusText(`congratulations ${formData.username}, You have registered successfully!`);\n        } else {\n          setRegisterStatusText(`This username is used, please try another one~`);\n        }\n      }).catch(error => {\n        setRegisterStatusText(`Error: ${error}`);\n      });\n    }\n\n    if (!nameIsValid || !passwordIsValid) {\n      setInputWarningText({\n        usernameReminder: nameIsValid ? \"\" : \"Invalid username!\",\n        passwordReminder: passwordIsValid ? \"\" : \"Invalid password!\"\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"register\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"REGISTER TODAY\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Instructions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Account name and password are restricted to underscores, hyphens, dots, digits, and lowercase alphabetical characters.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Account name and password should be between 1 and 127 in length.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"account name\",\n        name: \"username\",\n        onChange: updateFormData,\n        value: formData.username\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this), inputWarningText.usernameReminder, /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"password\",\n        name: \"password\",\n        onChange: updateFormData,\n        value: formData.password\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this), inputWarningText.passwordReminder, /*#__PURE__*/_jsxDEV(\"button\", {\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: registerStatusText\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Register, \"Y0qmbUL32n8tGzUWTeEm3Mbvp1I=\");\n\n_c = Register;\n\nvar _c;\n\n$RefreshReg$(_c, \"Register\");","map":{"version":3,"names":["React","Register","registerStatusText","setRegisterStatusText","useState","formData","setFormData","username","password","inputWarningText","setInputWarningText","usernameReminder","passwordReminder","checkInput","data","regex","result","char","match","length","updateFormData","event","preventDefault","console","log","target","value","prevFormData","name","handleSubmit","nameIsValid","passwordIsValid","prevState","fetch","method","headers","body","JSON","stringify","then","response","json","status","catch","error"],"sources":["/Users/zicheng.s/Documents/UC_Irvine_Info/Class/2022Spring/266P/Project/Bank_React/my-bank/src/components/Register.js"],"sourcesContent":["import React from \"react\";\n// zishan01\n// 12345\n\nexport default function Register() {\n    // registerStatusText is used to save the message whether the account is registered successfully or not\n    const [registerStatusText, setRegisterStatusText] = React.useState(\"\")\n\n    // formData is used to save the user input values\n    const [formData, setFormData] = React.useState(\n        {\n            username: \"\",\n            password: \"\"\n        }\n    )\n\n    // inputWarningText is used to save messages that prompts the user to change the information.\n    const [inputWarningText, setInputWarningText] = React.useState({\n        usernameReminder: \"\",\n        passwordReminder: \"\"\n    })\n\n    /**\n     * Check that the input conforms to the specification.\n     * @param data\n     * @returns {boolean}\n     */\n    function checkInput(data) {\n        const regex = /[_\\\\-\\\\.0-9a-z]/\n        let result = true\n        for (let char of data) {\n            if (char.match(regex) === null) {\n                result = false\n            }\n        }\n        return result && (data.length <= 127 && data.length >= 1)\n    }\n\n\n    function updateFormData(event) {\n        event.preventDefault()\n        console.log(event.target.value)\n        setFormData(prevFormData => {\n            return {\n                ...prevFormData,\n                [event.target.name]: event.target.value\n            }\n        })\n    }\n\n    function handleSubmit(event) {\n        event.preventDefault()\n\n        const nameIsValid = checkInput(formData.username)\n        const passwordIsValid = checkInput(formData.password)\n\n        setInputWarningText(prevState => ({\n            usernameReminder: \"\",\n            passwordReminder: \"\"\n        }))\n\n        if (nameIsValid && passwordIsValid) {\n\n            fetch('http://localhost:8081/bankSys/user/create', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n                body: JSON.stringify(formData),\n            })\n                .then(response => response.json())\n                .then(data => {\n                    // setBalance(data.data.user.balance)\n                    if (data.status === 200) {\n                        setRegisterStatusText(`congratulations ${formData.username}, You have registered successfully!`)\n                    } else {\n                        setRegisterStatusText(`This username is used, please try another one~`)\n                    }\n                })\n                .catch((error) => {\n                    setRegisterStatusText(`Error: ${error}`)\n                });\n        }\n        if (!nameIsValid || !passwordIsValid) {\n            setInputWarningText({\n                usernameReminder: nameIsValid ? \"\" : \"Invalid username!\",\n                passwordReminder: passwordIsValid ? \"\" : \"Invalid password!\"\n            })\n        }\n    }\n\n    return (\n        <div className=\"register\">\n            <h2>REGISTER TODAY</h2>\n            <p>Instructions</p>\n            <p>Account name and password are restricted to underscores, hyphens, dots, digits, and lowercase alphabetical characters.</p>\n            <p>Account name and password should be between 1 and 127 in length.</p>\n            <form onSubmit={handleSubmit}>\n                <input\n                    type=\"text\"\n                    placeholder=\"account name\"\n                    name=\"username\"\n                    onChange={updateFormData}\n                    value={formData.username}\n                />\n                {inputWarningText.usernameReminder}\n                <input\n                    type=\"text\"\n                    placeholder=\"password\"\n                    name=\"password\"\n                    onChange={updateFormData}\n                    value={formData.password}\n                />\n                {inputWarningText.passwordReminder}\n                <button>Register</button>\n            </form>\n            <p>{registerStatusText}</p>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}